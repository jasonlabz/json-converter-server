<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <title>JSON ‚Üí Â§öËØ≠Ë®ÄÁªìÊûÑ‰ΩìÁîüÊàêÂô®</title>

    <!-- ÂõæÊ†áÂ∫ì -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            margin: 0;
            background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 100%);
            color: #e5e7eb;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            height: 100vh;
            overflow: hidden;
        }

        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            padding: 16px;
            gap: 16px;
        }

        .header {
            text-align: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 8px;
        }

        .header h1 {
            font-size: 24px;
            font-weight: 600;
            background: linear-gradient(90deg, #60a5fa, #a78bfa);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .header .subtitle {
            font-size: 14px;
            color: #94a3b8;
            margin-top: 4px;
        }

        .config-panel {
            background: rgba(30, 41, 59, 0.8);
            border-radius: 12px;
            padding: 18px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
        }

        .config-content {
            display: flex;
            flex-wrap: wrap;
            gap: 24px;
            align-items: center;
        }

        .config-group {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .config-group label {
            font-size: 14px;
            font-weight: 500;
            color: #cbd5e1;
            white-space: nowrap;
        }

        .language-select {
            position: relative;
        }

        .language-select select {
            background: #1e293b;
            color: #f1f5f9;
            border: 1px solid #475569;
            padding: 10px 16px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            min-width: 180px;
            cursor: pointer;
            transition: all 0.2s;
            appearance: none;
            padding-right: 40px;
        }

        .language-select select:hover {
            border-color: #60a5fa;
            background: #1e293b;
        }

        .language-select select:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
        }

        .language-select::after {
            content: "‚ñº";
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: #94a3b8;
            font-size: 12px;
            pointer-events: none;
        }

        .go-tags-container {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            align-items: center;
        }

        .tag-checkbox {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .tag-checkbox input[type="checkbox"] {
            appearance: none;
            width: 18px;
            height: 18px;
            border: 2px solid #475569;
            border-radius: 4px;
            cursor: pointer;
            position: relative;
            transition: all 0.2s;
        }

        .tag-checkbox input[type="checkbox"]:checked {
            background-color: #3b82f6;
            border-color: #3b82f6;
        }

        .tag-checkbox input[type="checkbox"]:checked::after {
            content: "‚úì";
            position: absolute;
            color: white;
            font-size: 12px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .tag-checkbox label {
            font-size: 13px;
            color: #cbd5e1;
            cursor: pointer;
            user-select: none;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin-left: auto;
        }

        .btn {
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(90deg, #3b82f6, #6366f1);
            color: white;
        }

        .btn-primary:hover {
            background: linear-gradient(90deg, #2563eb, #4f46e5);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #e5e7eb;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .editor-panels {
            display: flex;
            flex: 1;
            gap: 16px;
            min-height: 0;
        }

        .panel {
            display: flex;
            flex-direction: column;
            background: rgba(15, 23, 42, 0.8);
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
        }

        .panel-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 14px 18px;
            background: rgba(30, 41, 59, 0.9);
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
        }

        .panel-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 16px;
            font-weight: 600;
            color: #f1f5f9;
        }

        .panel-title i {
            color: #60a5fa;
        }

        .panel-stats {
            font-size: 13px;
            color: #94a3b8;
        }

        .panel-content {
            flex: 1;
            position: relative;
            min-height: 0;
        }

        .json-panel {
            flex: 1;
        }

        .code-panel {
            flex: 1;
        }

        .editor-placeholder {
            height: 100%;
            background: #0f172a;
            border-radius: 0 0 12px 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #64748b;
            font-size: 14px;
        }

        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 18px;
            background: rgba(30, 41, 59, 0.9);
            border-top: 1px solid rgba(255, 255, 255, 0.08);
            font-size: 13px;
            color: #94a3b8;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .language-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
            background: rgba(59, 130, 246, 0.15);
            color: #60a5fa;
        }

        .info-icon {
            color: #60a5fa;
            font-size: 14px;
        }

        @media (max-width: 1200px) {
            .config-content {
                flex-direction: column;
                align-items: flex-start;
                gap: 16px;
            }

            .action-buttons {
                margin-left: 0;
                width: 100%;
                justify-content: flex-end;
            }
        }

        @media (max-width: 768px) {
            .editor-panels {
                flex-direction: column;
            }

            .panel {
                min-height: 300px;
            }
        }

        .error-message {
            color: #f87171;
            font-size: 13px;
            margin-top: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
    </style>
</head>
<body>

<div id="root"></div>

<!-- React & ReactDOM -->
<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

<!-- Monaco Editor -->
<script src="https://unpkg.com/monaco-editor@0.45.0/min/vs/loader.js"></script>

<script>
    // ÈÖçÁΩÆMonaco EditorË∑ØÂæÑ
    require.config({
        paths: {
            vs: "https://unpkg.com/monaco-editor@0.45.0/min/vs"
        }
    });

    // Á≠âÂæÖMonacoÂä†ËΩΩÂÆåÊàêÂêéÊâßË°å
    require(["vs/editor/editor.main"], function () {
        const { useState, useEffect, useRef, useCallback } = React;

        // ËØ≠Ë®ÄÈÖçÁΩÆ
        const LANGUAGE_CONFIG = {
            go: {
                name: "Golang",
                icon: "üîµ",
                fileExt: "go",
                monacoLang: "go"
            },
            java: {
                name: "Java",
                icon: "‚òï",
                fileExt: "java",
                monacoLang: "java"
            },
            typescript: {
                name: "TypeScript",
                icon: "üìò",
                fileExt: "ts",
                monacoLang: "typescript"
            },
            python: {
                name: "Python",
                icon: "üêç",
                fileExt: "py",
                monacoLang: "python"
            },
            kotlin: {
                name: "Kotlin",
                icon: "‚ö°",
                fileExt: "kt",
                monacoLang: "kotlin"
            },
            rust: {
                name: "Rust",
                icon: "ü¶Ä",
                fileExt: "rs",
                monacoLang: "rust"
            }
        };

        // ÈªòËÆ§JSON
        const DEFAULT_JSON = `{
  "user_id": 12345,
  "username": "john_doe",
  "full_name": "John Doe",
  "email": "john@example.com",
  "age": 30,
  "is_active": true,
  "score": 95.8,
  "roles": ["admin", "user"],
  "metadata": {
    "created_at": "2023-10-01T12:00:00Z",
    "last_login": "2023-12-15T08:30:00Z"
  },
  "preferences": {
    "theme": "dark",
    "notifications": true,
    "language": "en"
  },
  "tags": ["developer", "backend", "golang"],
  "projects": [
    {
      "id": 1,
      "name": "API Gateway",
      "status": "completed"
    },
    {
      "id": 2,
      "name": "User Service",
      "status": "in_progress"
    }
  ]
}`;

        function App() {
            const [lang, setLang] = useState("go");
            const [goTags, setGoTags] = useState({
                json: true,
                mapstructure: false,
                gorm: false,
                yaml: false,
                xml: false,
                validate: false,
                omitempty: true
            });

            const [structName, setStructName] = useState("Response");
            const [jsonText, setJsonText] = useState(DEFAULT_JSON);
            const [generatedCode, setGeneratedCode] = useState("");
            const [error, setError] = useState("");
            const [isGenerating, setIsGenerating] = useState(false);
            const [jsonStats, setJsonStats] = useState({ lines: 0, chars: 0 });
            const [codeStats, setCodeStats] = useState({ lines: 0, chars: 0 });

            const jsonEditorRef = useRef(null);
            const jsonEditorInstance = useRef(null);
            const codeEditorRef = useRef(null);
            const codeEditorInstance = useRef(null);

            // ÂàùÂßãÂåñÁºñËæëÂô®
            useEffect(() => {
                if (!jsonEditorInstance.current && jsonEditorRef.current) {
                    jsonEditorInstance.current = monaco.editor.create(jsonEditorRef.current, {
                        value: DEFAULT_JSON,
                        language: "json",
                        theme: "vs-dark",
                        automaticLayout: true,
                        folding: true,
                        minimap: { enabled: true },
                        scrollBeyondLastLine: false,
                        fontSize: 14,
                        lineNumbers: "on",
                        glyphMargin: true,
                        formatOnPaste: true,
                        formatOnType: true,
                        wordWrap: "on"
                    });

                    // ÁõëÂê¨ÂÜÖÂÆπÂèòÂåñ
                    jsonEditorInstance.current.onDidChangeModelContent(() => {
                        const value = jsonEditorInstance.current.getValue();
                        setJsonText(value);

                        // ËÆ°ÁÆóÁªüËÆ°‰ø°ÊÅØ
                        const lines = value.split('\n').length;
                        const chars = value.length;
                        setJsonStats({ lines, chars });
                    });
                }

                if (!codeEditorInstance.current && codeEditorRef.current) {
                    codeEditorInstance.current = monaco.editor.create(codeEditorRef.current, {
                        value: "",
                        language: "go",
                        theme: "vs-dark",
                        readOnly: true,
                        automaticLayout: true,
                        folding: true,
                        minimap: { enabled: true },
                        scrollBeyondLastLine: false,
                        fontSize: 14,
                        lineNumbers: "on"
                    });
                }

                // ÂàùÂßãÁîüÊàê
                generateCode();

                return () => {
                    if (jsonEditorInstance.current) {
                        jsonEditorInstance.current.dispose();
                        jsonEditorInstance.current = null;
                    }
                    if (codeEditorInstance.current) {
                        codeEditorInstance.current.dispose();
                        codeEditorInstance.current = null;
                    }
                };
            }, []);

            // Êõ¥Êñ∞‰ª£Á†ÅÁºñËæëÂô®ËØ≠Ë®Ä
            useEffect(() => {
                if (codeEditorInstance.current) {
                    const model = codeEditorInstance.current.getModel();
                    if (model) {
                        monaco.editor.setModelLanguage(model, LANGUAGE_CONFIG[lang].monacoLang);
                    }
                }
            }, [lang]);

            // ÁîüÊàê‰ª£Á†Å
            const generateCode = useCallback(() => {
                setIsGenerating(true);
                setError("");

                try {
                    const jsonValue = jsonEditorInstance.current?.getValue() || jsonText;
                    const obj = JSON.parse(jsonValue);

                    const code = generateCodeFromObject(obj, lang, structName, goTags);
                    setGeneratedCode(code);

                    // Êõ¥Êñ∞‰ª£Á†ÅÁºñËæëÂô®
                    if (codeEditorInstance.current) {
                        codeEditorInstance.current.setValue(code);
                    }

                    // ËÆ°ÁÆóÁªüËÆ°‰ø°ÊÅØ
                    const lines = code.split('\n').length;
                    const chars = code.length;
                    setCodeStats({ lines, chars });

                } catch (err) {
                    const errorMsg = `JSONËß£ÊûêÈîôËØØ: ${err.message}`;
                    setError(errorMsg);

                    const errorCode = `// ${errorMsg}\n// ËØ∑Ê£ÄÊü•JSONÊ†ºÂºèÊòØÂê¶Ê≠£Á°Æ`;
                    setGeneratedCode(errorCode);

                    if (codeEditorInstance.current) {
                        codeEditorInstance.current.setValue(errorCode);
                    }

                    setCodeStats({ lines: 2, chars: errorCode.length });
                } finally {
                    setIsGenerating(false);
                }
            }, [lang, goTags, structName, jsonText]);

            // Ê†ºÂºèÂåñJSON
            const formatJson = () => {
                try {
                    const jsonValue = jsonEditorInstance.current?.getValue() || jsonText;
                    const obj = JSON.parse(jsonValue);
                    const formatted = JSON.stringify(obj, null, 2);

                    if (jsonEditorInstance.current) {
                        jsonEditorInstance.current.setValue(formatted);
                    }
                    setJsonText(formatted);
                    setError("");
                } catch (err) {
                    setError(`Ê†ºÂºèÂåñÈîôËØØ: ${err.message}`);
                }
            };

            // ÈáçÁΩÆJSON
            const resetJson = () => {
                if (jsonEditorInstance.current) {
                    jsonEditorInstance.current.setValue(DEFAULT_JSON);
                }
                setJsonText(DEFAULT_JSON);
                setError("");
            };

            // Â§çÂà∂‰ª£Á†ÅÂà∞Ââ™Ë¥¥Êùø
            const copyCode = () => {
                if (generatedCode) {
                    navigator.clipboard.writeText(generatedCode)
                        .then(() => {
                            // ÂèØ‰ª•Âú®ËøôÈáåÊ∑ªÂä†‰∏Ä‰∏™‰∏¥Êó∂ÊèêÁ§∫
                            console.log("‰ª£Á†ÅÂ∑≤Â§çÂà∂Âà∞Ââ™Ë¥¥Êùø");
                        })
                        .catch(err => {
                            console.error("Â§çÂà∂Â§±Ë¥•:", err);
                        });
                }
            };

            // ‰∏ãËΩΩ‰ª£Á†Å
            const downloadCode = () => {
                if (!generatedCode) return;

                const blob = new Blob([generatedCode], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `${structName}.${LANGUAGE_CONFIG[lang].fileExt}`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            };

            // Â§ÑÁêÜGoÊ†áÁ≠æÊõ¥Êñ∞
            const updateGoTag = (tag, checked) => {
                setGoTags(prev => ({
                    ...prev,
                    [tag]: checked
                }));
            };

            return React.createElement("div", { className: "app-container" },
                // Â§¥ÈÉ®
                React.createElement("div", { className: "header" },
                    React.createElement("h1", null,
                        React.createElement("i", { className: "fas fa-code" }),
                        "JSON ‚Üí Â§öËØ≠Ë®ÄÁªìÊûÑ‰ΩìÁîüÊàêÂô®"
                    ),
                    React.createElement("div", { className: "subtitle" },
                        "ÊîØÊåÅ Golang, Java, TypeScript, Python, Kotlin, Rust"
                    )
                ),

                // ÈÖçÁΩÆÈù¢Êùø
                React.createElement("div", { className: "config-panel" },
                    React.createElement("div", { className: "config-content" },
                        // ËØ≠Ë®ÄÈÄâÊã©
                        React.createElement("div", { className: "config-group" },
                            React.createElement("label", { htmlFor: "language-select" }, "ÁõÆÊ†áËØ≠Ë®Ä"),
                            React.createElement("div", { className: "language-select" },
                                React.createElement("select", {
                                        id: "language-select",
                                        value: lang,
                                        onChange: (e) => setLang(e.target.value)
                                    },
                                    Object.entries(LANGUAGE_CONFIG).map(([value, config]) =>
                                        React.createElement("option", { key: value, value: value },
                                            `${config.icon} ${config.name}`
                                        )
                                    )
                                )
                            )
                        ),

                        // ÁªìÊûÑ‰ΩìÂêçÁß∞
                        lang === "go" && React.createElement("div", { className: "config-group" },
                            React.createElement("label", { htmlFor: "struct-name" }, "ÁªìÊûÑ‰ΩìÂêçÁß∞"),
                            React.createElement("input", {
                                id: "struct-name",
                                type: "text",
                                value: structName,
                                onChange: (e) => setStructName(e.target.value),
                                style: {
                                    background: "#1e293b",
                                    color: "#f1f5f9",
                                    border: "1px solid #475569",
                                    padding: "10px 12px",
                                    borderRadius: "8px",
                                    fontSize: "14px",
                                    width: "120px"
                                }
                            })
                        ),

                        // GoÊ†áÁ≠æÈÄâÈ°π
                        lang === "go" && React.createElement("div", { className: "go-tags-container" },
                            React.createElement("span", { style: { fontSize: "14px", color: "#cbd5e1", marginRight: "8px" } }, "Ê†áÁ≠æ:"),
                            Object.entries(goTags).map(([tag, checked]) =>
                                React.createElement("div", { className: "tag-checkbox", key: tag },
                                    React.createElement("input", {
                                        type: "checkbox",
                                        id: `tag-${tag}`,
                                        checked: checked,
                                        onChange: (e) => updateGoTag(tag, e.target.checked)
                                    }),
                                    React.createElement("label", { htmlFor: `tag-${tag}` }, tag)
                                )
                            )
                        ),

                        // Êìç‰ΩúÊåâÈíÆ
                        React.createElement("div", { className: "action-buttons" },
                            React.createElement("button", {
                                    className: "btn btn-secondary",
                                    onClick: formatJson
                                },
                                React.createElement("i", { className: "fas fa-indent" }),
                                "Ê†ºÂºèÂåñJSON"
                            ),
                            React.createElement("button", {
                                    className: "btn btn-secondary",
                                    onClick: resetJson
                                },
                                React.createElement("i", { className: "fas fa-redo" }),
                                "ÈáçÁΩÆ"
                            ),
                            React.createElement("button", {
                                    className: "btn btn-primary",
                                    onClick: generateCode,
                                    disabled: isGenerating
                                },
                                isGenerating
                                    ? React.createElement(React.Fragment, null,
                                        React.createElement("i", { className: "fas fa-spinner fa-spin" }),
                                        "ÁîüÊàê‰∏≠..."
                                    )
                                    : React.createElement(React.Fragment, null,
                                        React.createElement("i", { className: "fas fa-bolt" }),
                                        "ÁîüÊàê‰ª£Á†Å"
                                    )
                            )
                        )
                    ),

                    // ÈîôËØØ‰ø°ÊÅØ
                    error && React.createElement("div", { className: "error-message" },
                        React.createElement("i", { className: "fas fa-exclamation-triangle" }),
                        error
                    )
                ),

                // ÁºñËæëÂô®Èù¢Êùø
                React.createElement("div", { className: "editor-panels" },
                    // JSONÁºñËæëÂô®
                    React.createElement("div", { className: "panel json-panel" },
                        React.createElement("div", { className: "panel-header" },
                            React.createElement("div", { className: "panel-title" },
                                React.createElement("i", { className: "fas fa-code" }),
                                "JSON ËæìÂÖ•"
                            ),
                            React.createElement("div", { className: "panel-stats" },
                                `${jsonStats.lines} Ë°å, ${jsonStats.chars} Â≠óÁ¨¶`
                            )
                        ),
                        React.createElement("div", {
                            ref: jsonEditorRef,
                            className: "panel-content"
                        })
                    ),

                    // ‰ª£Á†ÅËæìÂá∫
                    React.createElement("div", { className: "panel code-panel" },
                        React.createElement("div", { className: "panel-header" },
                            React.createElement("div", { className: "panel-title" },
                                React.createElement("i", { className: "fas fa-file-code" }),
                                `${LANGUAGE_CONFIG[lang].name} ‰ª£Á†Å`
                            ),
                            React.createElement("div", { className: "panel-stats" },
                                `${codeStats.lines} Ë°å, ${codeStats.chars} Â≠óÁ¨¶`
                            )
                        ),
                        React.createElement("div", {
                            ref: codeEditorRef,
                            className: "panel-content"
                        })
                    )
                ),

                // Áä∂ÊÄÅÊ†è
                React.createElement("div", { className: "status-bar" },
                    React.createElement("div", { className: "status-item" },
                        React.createElement("div", { className: "language-badge" },
                            React.createElement("i", { className: "fas fa-code" }),
                            LANGUAGE_CONFIG[lang].name
                        )
                    ),
                    React.createElement("div", { className: "status-item" },
                        React.createElement("i", { className: "fas fa-info-circle info-icon" }),
                        React.createElement("span", null,
                            lang === "go" ? "ÊîØÊåÅ json, mapstructure, gorm Á≠âÊ†áÁ≠æ" :
                                "Ëá™Âä®Êé®Êñ≠Á±ªÂûãÂπ∂ÁîüÊàêÁªìÊûÑ‰Ωì/Á±ªÂÆö‰πâ"
                        )
                    ),
                    React.createElement("div", { className: "status-item" },
                        React.createElement("button", {
                                className: "btn btn-secondary",
                                onClick: copyCode,
                                style: { padding: "6px 12px", fontSize: "13px" },
                                disabled: !generatedCode
                            },
                            React.createElement("i", { className: "fas fa-copy" }),
                            "Â§çÂà∂"
                        ),
                        React.createElement("button", {
                                className: "btn btn-secondary",
                                onClick: downloadCode,
                                style: { padding: "6px 12px", fontSize: "13px" },
                                disabled: !generatedCode
                            },
                            React.createElement("i", { className: "fas fa-download" }),
                            "‰∏ãËΩΩ"
                        )
                    )
                )
            );
        }

        // ‰ª£Á†ÅÁîüÊàêÂáΩÊï∞
        function generateCodeFromObject(obj, lang, structName, goTags) {
            if (lang === "go") return genGo(obj, structName, goTags);
            if (lang === "typescript") return genTypeScript(obj, structName);
            if (lang === "java") return genJava(obj, structName);
            if (lang === "python") return genPython(obj, structName);
            if (lang === "kotlin") return genKotlin(obj, structName);
            if (lang === "rust") return genRust(obj, structName);
            return `// ‰∏çÊîØÊåÅÁöÑËØ≠Ë®Ä: ${lang}`;
        }

        // Á±ªÂûãÊé®Êñ≠ËæÖÂä©ÂáΩÊï∞
        function inferType(value, lang) {
            if (value === null) return lang === "typescript" ? "null" : "any";

            if (Array.isArray(value)) {
                if (value.length === 0) {
                    if (lang === "go") return "[]interface{}";
                    if (lang === "typescript") return "any[]";
                    if (lang === "java") return "List<Object>";
                    if (lang === "kotlin") return "List<Any>";
                    if (lang === "rust") return "Vec<serde_json::Value>";
                    return "list";
                }

                const itemType = inferType(value[0], lang);
                if (lang === "go") return `[]${itemType}`;
                if (lang === "typescript") return `${itemType}[]`;
                if (lang === "java") return `List<${itemType}>`;
                if (lang === "kotlin") return `List<${itemType}>`;
                if (lang === "rust") return `Vec<${itemType}>`;
                if (lang === "python") return `List[${itemType}]`;
            }

            if (typeof value === "object") {
                if (lang === "go") return "struct";
                if (lang === "typescript") return "any";
                if (lang === "java") return "Object";
                if (lang === "kotlin") return "Any";
                if (lang === "rust") return "serde_json::Value";
                if (lang === "python") return "dict";
            }

            switch (typeof value) {
                case "number":
                    if (Number.isInteger(value)) {
                        if (lang === "go") return "int";
                        if (lang === "typescript") return "number";
                        if (lang === "java") return "Integer";
                        if (lang === "kotlin") return "Int";
                        if (lang === "rust") return "i64";
                        if (lang === "python") return "int";
                    } else {
                        if (lang === "go") return "float64";
                        if (lang === "typescript") return "number";
                        if (lang === "java") return "Double";
                        if (lang === "kotlin") return "Double";
                        if (lang === "rust") return "f64";
                        if (lang === "python") return "float";
                    }
                    break;
                case "string":
                    if (lang === "go") return "string";
                    if (lang === "typescript") return "string";
                    if (lang === "java") return "String";
                    if (lang === "kotlin") return "String";
                    if (lang === "rust") return "String";
                    if (lang === "python") return "str";
                    break;
                case "boolean":
                    if (lang === "go") return "bool";
                    if (lang === "typescript") return "boolean";
                    if (lang === "java") return "Boolean";
                    if (lang === "kotlin") return "Boolean";
                    if (lang === "rust") return "bool";
                    if (lang === "python") return "bool";
                    break;
            }

            return "any";
        }

        // ÁîüÊàêGo‰ª£Á†Å
        function genGo(obj, name, tags) {
            let code = `type ${name} struct {\n`;

            for (const [key, value] of Object.entries(obj)) {
                const fieldName = capitalize(key);
                const fieldType = inferType(value, "go");

                // ÊûÑÂª∫Ê†áÁ≠æ
                let tagParts = [];
                if (tags.json) {
                    tagParts.push(`json:"${key}${tags.omitempty ? ",omitempty" : ""}"`);
                }
                if (tags.mapstructure) {
                    tagParts.push(`mapstructure:"${key}"`);
                }
                if (tags.gorm) {
                    tagParts.push(`gorm:"column:${key}"`);
                }
                if (tags.yaml) {
                    tagParts.push(`yaml:"${key}"`);
                }
                if (tags.xml) {
                    tagParts.push(`xml:"${key}"`);
                }
                if (tags.validate) {
                    const validateRules = [];
                    if (typeof value === "string") {
                        if (value.includes("@")) validateRules.push("email");
                        if (key.toLowerCase().includes("url")) validateRules.push("url");
                    }
                    if (typeof value === "number") validateRules.push("numeric");
                    if (validateRules.length > 0) {
                        tagParts.push(`validate:"${validateRules.join(",")}"`);
                    }
                }

                const tagStr = tagParts.length > 0 ? ` \`${tagParts.join(" ")}\`` : "";

                // Â§ÑÁêÜÂµåÂ•óÁªìÊûÑ
                if (typeof value === "object" && value !== null && !Array.isArray(value)) {
                    code += `  ${fieldName} ${genGoStruct(value, capitalize(key), tags, 1)}${tagStr}\n`;
                } else if (Array.isArray(value) && value.length > 0 && typeof value[0] === "object") {
                    // ÂØπË±°Êï∞ÁªÑ - ÁîüÊàêÂµåÂ•óÁ±ªÂûã
                    const itemTypeName = capitalize(key.slice(0, -1)); // ÂéªÈô§Â§çÊï∞s
                    code += `  ${fieldName} []${itemTypeName}${tagStr}\n`;
                    code += genGoStruct(value[0], itemTypeName, tags, 0);
                } else {
                    code += `  ${fieldName} ${fieldType}${tagStr}\n`;
                }
            }

            code += "}";
            return code;
        }

        // ÈÄíÂΩíÁîüÊàêGoÁªìÊûÑ‰ΩìÔºàÁî®‰∫éÂµåÂ•óÂØπË±°Ôºâ
        function genGoStruct(obj, name, tags, indent) {
            let indentStr = "  ".repeat(indent);
            let code = `${indentStr}${name} struct {\n`;

            for (const [key, value] of Object.entries(obj)) {
                const fieldName = capitalize(key);
                const fieldType = inferType(value, "go");

                // ÊûÑÂª∫Ê†áÁ≠æ
                let tagParts = [];
                if (tags.json) {
                    tagParts.push(`json:"${key}${tags.omitempty ? ",omitempty" : ""}"`);
                }
                if (tags.mapstructure) {
                    tagParts.push(`mapstructure:"${key}"`);
                }

                const tagStr = tagParts.length > 0 ? ` \`${tagParts.join(" ")}\`` : "";

                if (typeof value === "object" && value !== null && !Array.isArray(value)) {
                    code += `${indentStr}  ${fieldName} ${genGoStruct(value, capitalize(key), tags, indent + 1)}${tagStr}\n`;
                } else {
                    code += `${indentStr}  ${fieldName} ${fieldType}${tagStr}\n`;
                }
            }

            code += `${indentStr}}`;
            return code;
        }

        // ÁîüÊàêTypeScript‰ª£Á†Å
        function genTypeScript(obj, name) {
            let code = `interface ${name} {\n`;

            for (const [key, value] of Object.entries(obj)) {
                const fieldType = inferType(value, "typescript");
                code += `  ${key}: ${fieldType};\n`;
            }

            code += "}";
            return code;
        }

        // ÁîüÊàêJava‰ª£Á†Å
        function genJava(obj, name) {
            let code = `import com.fasterxml.jackson.annotation.JsonProperty;\n`;
            code += `import lombok.Data;\n`;
            code += `import java.util.List;\n\n`;
            code += `@Data\n`;
            code += `public class ${name} {\n`;

            for (const [key, value] of Object.entries(obj)) {
                const fieldType = inferType(value, "java");
                const fieldName = key;

                code += `  @JsonProperty("${key}")\n`;
                code += `  private ${fieldType} ${fieldName};\n`;
            }

            code += "}";
            return code;
        }

        // ÁîüÊàêPython‰ª£Á†Å
        function genPython(obj, name) {
            let code = `from typing import Optional, List, Dict, Any\n`;
            code += `from pydantic import BaseModel\n\n`;
            code += `class ${name}(BaseModel):\n`;

            for (const [key, value] of Object.entries(obj)) {
                const fieldType = inferType(value, "python");
                code += `    ${key}: ${fieldType}\n`;
            }

            return code;
        }

        // ÁîüÊàêKotlin‰ª£Á†Å
        function genKotlin(obj, name) {
            let code = `import com.fasterxml.jackson.annotation.JsonProperty\n\n`;
            code += `data class ${name}(\n`;

            const entries = Object.entries(obj);
            entries.forEach(([key, value], index) => {
                const fieldType = inferType(value, "kotlin");
                const comma = index < entries.length - 1 ? "," : "";
                code += `    @JsonProperty("${key}")\n`;
                code += `    val ${key}: ${fieldType}${comma}\n`;
            });

            code += ")";
            return code;
        }

        // ÁîüÊàêRust‰ª£Á†Å
        function genRust(obj, name) {
            let code = `use serde::{Deserialize, Serialize};\n\n`;
            code += `#[derive(Debug, Serialize, Deserialize)]\n`;
            code += `pub struct ${name} {\n`;

            for (const [key, value] of Object.entries(obj)) {
                const fieldType = inferType(value, "rust");
                code += `    #[serde(rename = "${key}")]\n`;
                code += `    pub ${key}: ${fieldType},\n`;
            }

            code = code.slice(0, -2) + "\n"; // ÁßªÈô§ÊúÄÂêé‰∏Ä‰∏™ÈÄóÂè∑
            code += "}";
            return code;
        }

        // Â∑•ÂÖ∑ÂáΩÊï∞ÔºöÈ¶ñÂ≠óÊØçÂ§ßÂÜô
        function capitalize(s) {
            if (!s) return "";
            return s.charAt(0).toUpperCase() + s.slice(1);
        }

        // Ê∏≤ÊüìÂ∫îÁî®
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(App));
    });
</script>
</body>
</html>
